"use strict";(()=>{var Te="v1.0.0";var Fo="TinyBase",Is=document,Le=()=>{addEventListener("load",()=>{let t=Ds("#version");t.innerText=Te,t.style.width=t.scrollWidth+"px"})},Po=null,Ee=()=>Po??=Ds("body > main > nav"),bo=null,Se=()=>bo??=Ds("body > main > article"),jt=t=>t.preventDefault(),Ds=t=>Is.querySelector(t),Xs=(t,n)=>t.querySelector(n),Ao=t=>Is.getElementById(t),ns=(t,n,c={},r)=>{let a=Is.createElement(t);return Object.entries(c).forEach(d=>a.setAttribute(...d)),r!=null&&(a.innerText=r),n!=null?n.appendChild(a):a},Us=(t,n)=>t.classList.add(n);var at=(t,n)=>t.classList.remove(n);var pe=(t,n=!0)=>{let c=Ee();["?","#"].forEach(r=>{t.includes(r)&&(t=t.substring(0,t.indexOf(r)))}),fetch(`${t}nav.json`).then(r=>r.json()).then(r=>{at(Xs(c,"li.current"),"current"),Ce(r,Xs(c,"ul"))}),fetch(`${t}article.html`).then(r=>r.text()).then(r=>{let a=Se();a.innerHTML=r,a.scrollTo(0,0),zo()}),n&&history.pushState(null,"",t)},zo=()=>{let t=Xs(Se(),":scope iframe"),n=t?.parentElement;if(t==null||n==null)return;let c=n.insertBefore(ns("form",null,{action:"https://codepen.io/pen/define",method:"post",target:"_blank"}),t);n.insertBefore(ns("a",null,{id:"penEdit"},"Open this demo in CodePen"),t).onclick=()=>{c.childNodes.length==0?fetch("pen.json").then(r=>r.text()).then(r=>{ns("input",c,{type:"hidden",name:"data",value:r}),c.submit()}):c.submit()}},Ce=({i:t,n,u:c,r,c:a,p:d,o:L,_:b},$)=>{let p=Ee(),E=Ao(t);if(E==null){E=ns("li",$,{id:t}),ns("span",E);let f=ns("a",E,{href:c});r?ns("code",f,{},n):f.innerText=n,d&&Us(E,"parent")}if(L&&Us(E,"open"),b!=null){let f=Xs(E,"ul")??ns("ul",E);b.forEach(u=>{Ce(u,f)})}if(a){Us(E,"current"),Is.title=`${n} | ${Fo}`;let f=E.getBoundingClientRect(),u=p.getBoundingClientRect();f.top<u.top?p.scrollBy(0,f.top-u.top):f.bottom>u.bottom&&p.scrollBy(0,Math.min(f.bottom-u.bottom,f.top-u.top))}};var As="dark",on="light",cn="auto",ye=()=>{let t=matchMedia("(prefers-color-scheme: dark)"),n=()=>{let c=localStorage.getItem(As)??cn;Ds("#dark")?.setAttribute("class",c),Ds("html").className=c==As||c==cn&&t.matches?As:on};t.addEventListener("change",n),window.addEventListener("storage",c=>{c.storageArea==localStorage&&c.key==As&&n()}),addEventListener("load",()=>{Ds("#dark").addEventListener("click",()=>{let c=localStorage.getItem(As);localStorage.setItem(As,c==As?on:c==on?cn:As),n()}),n()}),n()};var Ne=t=>typeof t;var jo=Ne(""),Re=t=>""+t,Rs=t=>t==null,ks=(t,n,c)=>Rs(t)?c?.():n(t),Go=t=>Ne(t)==jo,ht=t=>Array.isArray(t),_s=t=>t.length,Yo=(t,n)=>t.test(n),xe=(t,n)=>t.every(n),Bo=(t,n)=>_s(t)===_s(n)&&xe(t,(c,r)=>n[r]===c),me=(t,n)=>xe(t,(c,r)=>r==0||n(t[r-1],c)<=0),Ve=(t,n)=>t.sort(n),qs=(t,n)=>t.forEach(n),Wo=(t,n)=>t.map(n),Uo=t=>_s(t)==0,ko=(t,n,c)=>t.reduce(n,c),we=(t,...n)=>t.push(...n),qo=t=>t.shift(),De=t=>n=>ko(ln(n),(c,r)=>c+t(r),0),He=t=>t?.size??0,_e=De(He),Jo=De(_e),st=(t,n)=>t?.has(n)??!1,gt=t=>Rs(t)||He(t)==0,ln=t=>[...t?.values()??[]],Me=t=>t.clear(),ds=(t,n)=>t?.forEach(n),tt=(t,n)=>t?.delete(n),Ko=Object,$o=Ko.freeze,es=t=>new Map(t),Fe=t=>[...t?.keys()??[]],W=(t,n)=>t?.get(n),ft=(t,n)=>ds(t,(c,r)=>n(r,c)),B=(t,n,c)=>Rs(c)?(tt(t,n),t):t?.set(n,c),Pe=(t,n,c,r)=>(st(t,n)?r?.(W(t,n)):B(t,n,c()),W(t,n)),rn=(t,n,c,r,a=0)=>ks((c?Pe:W)(t,n[a],a>_s(n)-2?c:es),d=>{if(a>_s(n)-2)return r?.(d)&&B(t,n[a]),d;let L=rn(d,n,c,r,a+1);return gt(d)&&B(t,n[a]),L}),zs=t=>new Set(ht(t)||Rs(t)?t:[t]),Hs=(t,n)=>t?.add(n),Zo=(t,n,c,r,a)=>{let d=t.hasRow,L=es(),b=es(),$=es(),p=es(),E=es(),f=es(),u=()=>t,R=()=>Fe(L),M=C=>ft(b,C),m=C=>st(b,C),D=C=>W(L,C),U=C=>W(b,C),Ts=(C,z)=>B(b,C,z),Ls=(C,z,...cs)=>{let O=Pe(f,C,zs);return qs(cs,S=>Hs(O,S)&&z&&t.callListener(S)),cs},Vs=(C,...z)=>ks(W(f,C),cs=>{qs(Uo(z)?ln(cs):z,O=>{t.delListener(O),tt(cs,O)}),gt(cs)&&B(f,C)}),Cs=(C,z)=>{B(L,C,z),st(b,C)||(B(b,C,n()),B(p,C,es()),B(E,C,es()),a($))},Ms=(C,z,cs,O,S)=>{Cs(C,z);let P=es(),Q=es(),X=W(p,C),is=W(E,C),Es=F=>{let K=Ss=>t.getCell(z,F,Ss),I=W(X,F),ps=d(z,F)?c(O(K,F)):void 0;if(I===ps||ht(I)&&ht(ps)&&Bo(I,ps)||B(P,F,[I,ps]),!Rs(S)){let Ss=W(is,F),vs=d(z,F)?S(K,F):void 0;Ss!=vs&&B(Q,F,vs)}},gs=F=>{cs(()=>{ds(P,([,K],I)=>B(X,I,K)),ds(Q,(K,I)=>B(is,I,K))},P,Q,X,is,F),Me(P),Me(Q)};ft(X,Es),t.hasTable(z)&&qs(t.getRowIds(z),F=>{st(X,F)||Es(F)}),gs(!0),Vs(C),Ls(C,0,t.addRowListener(z,null,(F,K,I)=>Es(I)),t.addTableListener(z,()=>gs()))},N=C=>{B(L,C),B(b,C),B(p,C),B(E,C),Vs(C),a($)};return[u,R,M,m,D,U,Ts,Cs,Ms,N,C=>r(C,$),()=>ft(f,N),Ls,Vs]},ve=(t,n)=>Go(t)?c=>c(t):t??(()=>n??""),Oo=(t,n)=>{let c=new WeakMap;return r=>(c.has(r)||c.set(r,t(r)),c.get(r))},Qo=(t,n)=>(t??0)<(n??0)?-1:1,Xo=/^\d+$/,Io=()=>{let t=[],n=0;return[c=>(c?qo(t):null)??""+n++,c=>{Yo(Xo,c)&&_s(t)<1e3&&we(t,c)}]},sc=(t,n=[""])=>{let c=[],r=(a,d)=>d==_s(n)?we(c,a):n[d]===null?ds(a,L=>r(L,d+1)):qs([n[d],null],L=>r(W(a,L),d+1));return r(t,0),c},tc=t=>{let n,[c,r]=Io(),a=es();return[(p,E,f,u=[],R=()=>[])=>{n??=t();let M=c(1);return B(a,M,[p,E,f,u,R]),Hs(rn(E,f??[""],zs),M),M},(p,E,...f)=>qs(sc(p,E),u=>ds(u,R=>W(a,R)[0](n,...E??[],...f))),p=>ks(W(a,p),([,E,f])=>(rn(E,f??[""],void 0,u=>(tt(u,p),gt(u)?1:0)),B(a,p),r(p),f)),p=>ks(W(a,p),([E,,f=[],u,R])=>{let M=(...m)=>{let D=_s(m);D==_s(f)?E(n,...m,...R(m)):Rs(f[D])?qs(u[D]?.(...m)??[],U=>M(...m,U)):M(...m,f[D])};M()})]},be=Oo(t=>{let n=es(),c=es(),[r,a,d]=tc(()=>O),[L,b,$,p,E,f,u,,R,M,m,D]=Zo(t,es,S=>Rs(S)?"":ht(S)?Wo(S,Re):Re(S),r,a),U=(S,P)=>st(f(S),P),Ts=(S,P,Q,X,is,Es=Qo)=>{let gs=Rs(is)?void 0:([F],[K])=>is(F,K);return R(S,P,(F,K,I,ps,Ss,vs)=>{let ys=0,Ns=zs(),xs=zs(),rs=f(S);if(ds(K,([k,ls],as)=>{let A=zs(k),Os=zs(ls);ds(A,fs=>tt(Os,fs)?tt(A,fs):0),ds(A,fs=>{Hs(Ns,fs),ks(W(rs,fs),yt=>{tt(yt,as),gt(yt)&&(B(rs,fs),ys=1)})}),ds(Os,fs=>{Hs(Ns,fs),st(rs,fs)||(B(rs,fs,zs()),ys=1),Hs(W(rs,fs),as),Rs(X)||Hs(xs,fs)})}),F(),gt(Ss)||(vs?ft(rs,k=>Hs(xs,k)):ft(I,k=>ks(W(ps,k),ls=>qs(ht(ls)?ls:[ls],as=>Hs(xs,as)))),ds(xs,k=>{let ls=(A,Os)=>Es(W(Ss,A),W(Ss,Os),k),as=[...W(rs,k)];me(as,ls)||(B(rs,k,zs(Ve(as,ls))),Hs(Ns,k))})),(ys||vs)&&!Rs(gs)){let k=[...rs];me(k,gs)||(u(S,es(Ve(k,gs))),ys=1)}ys&&a(n,[S]),ds(Ns,k=>a(c,[S,k]))},ve(Q),ks(X,ve)),O},Ls=S=>$((P,Q)=>S(P,X=>Cs(P,X,Q))),Vs=(S,P)=>Cs(S,P,f(S)),Cs=(S,P,Q)=>{let X=E(S);ds(Q,(is,Es)=>P(Es,gs=>ds(is,F=>gs(F,K=>t.forEachCell(X,F,K)))))},O={setIndexDefinition:Ts,delIndexDefinition:S=>(M(S),O),getStore:L,getIndexIds:b,forEachIndex:Ls,forEachSlice:Vs,hasIndex:p,hasSlice:U,getTableId:E,getSliceIds:S=>Fe(f(S)),getSliceRowIds:(S,P)=>ln(W(f(S),P)),addIndexIdsListener:m,addSliceIdsListener:(S,P)=>r(P,n,[S]),addSliceRowIdsListener:(S,P,Q)=>r(Q,c,[S,P]),delListener:S=>(d(S),O),destroy:D,getListenerStats:()=>({sliceIds:_e(n),sliceRowIds:Jo(c)})};return $o(O)});var Zs=t=>typeof t;var nc=Zs(""),ec=Zs(!0),ke=Zs(0),oc=Zs(Zs),Gt="type",Js="default",cc="Listener",ic="add",Ks="Has",Ot="Ids",et="Table",Ae=et+"s",rc=et+Ot,kt="Row",lc=kt+"Count",ac=kt+Ot,Ut="Cell",ze=Ut+Ot,qt="Value",je=qt+"s",fc=qt+Ot,H=t=>""+t,hc=isFinite,gc=(t,n)=>t instanceof n,J=t=>t==null,q=(t,n,c)=>J(t)?c?.():n(t),qe=t=>t==nc||t==ec,an=t=>Zs(t)==oc,Je=t=>Array.isArray(t),Ge=(t,n,c)=>t.slice(n,c),Fs=t=>t.length,uc=(t,n)=>t.test(n),fn=async(t,n,c)=>{try{return await t()}catch(r){n?.(r)}},dc=(t,n)=>t.includes(n),Tc=(t,n)=>t.every(n),Lc=(t,n)=>Fs(t)===Fs(n)&&Tc(t,(c,r)=>n[r]===c),Ec=(t,n)=>t.sort(n),Ct=(t,n)=>t.forEach(n),Jt=(t,n)=>t.map(n),Sc=(t,n,c)=>t.reduce(n,c),Kt=(t,...n)=>t.push(...n),pc=t=>t.shift(),ut=t=>{let n=Zs(t);return qe(n)||n==ke&&hc(t)?n:void 0},Ye=(t,n,c,r,a)=>J(a)?t.delCell(n,c,r,!0):t.setCell(n,c,r,a),Be=(t,n,c)=>J(c)?t.delValue(n):t.setValue(n,c),Sn=t=>n=>Sc(Cc(n),(c,r)=>c+t(r),0),pn=t=>t?.size??0,Cn=Sn(pn),Lt=Sn(Cn),hn=Sn(Lt),os=(t,n)=>t?.has(n)??!1,y=t=>J(t)||pn(t)==0,Cc=t=>[...t?.values()??[]],gn=t=>t.clear(),v=(t,n)=>t?.forEach(n),$t=(t,n)=>t?.delete(n),Ws=Object,We=t=>Ws.getPrototypeOf(t),yc=Ws.isFrozen,Ke=Ws.entries,Zt=t=>!J(t)&&q(We(t),n=>n==Ws.prototype||J(We(n)),()=>!0),Rc=Ws.keys,mc=Ws.freeze,Vc=(t=[])=>Ws.fromEntries(t),Et=(t,n)=>n in t,$e=(t,n)=>(delete t[n],t),Mc=(t,n)=>Ct(Ke(t),([c,r])=>n(r,c)),vc=(t,n)=>Jt(Ke(t),([c,r])=>n(r,c)),Gs=(t,n)=>Vc(vc(t,(c,r)=>[r,n(c,r)])),Nc=t=>Fs(Rc(t)),ms=t=>Zt(t)&&Nc(t)==0,js=(t,n,c,r=0)=>J(t)||!Zt(t)||!r&&ms(t)||yc(t)?(c?.(),!1):(Mc(t,(a,d)=>{n(a,d)||$e(t,d)}),r?!0:!ms(t)),V=t=>new Map(t),dt=t=>[...t?.keys()??[]],g=(t,n)=>t?.get(n),Ys=(t,n)=>v(t,(c,r)=>n(r,c)),xc=(t,n)=>Jt([...t?.entries()??[]],([c,r])=>n(r,c)),_=(t,n,c)=>J(c)?($t(t,n),t):t?.set(n,c),ss=(t,n,c,r)=>(os(t,n)?r?.(g(t,n)):_(t,n,c()),g(t,n)),$s=(t,n,c,r=_)=>(Gs(n,(a,d)=>c(t,d,a)),Ys(t,a=>Et(n,a)?0:r(t,a)),t),hs=(t,n,c,r)=>{let a={};return v(t,(d,L)=>{if(!c?.(d,L)){let b=n?n(d,L):d;r?.(b)||(a[L]=b)}}),a},Tn=(t,n,c)=>hs(t,r=>hs(r,n,c),y,ms),Yt=(t,n,c)=>hs(t,r=>Tn(r,n,c),y,ms),Bs=(t,n)=>{let c=V();return v(t,(r,a)=>c.set(a,n?.(r)??r)),c},Ln=t=>Bs(t,Bs),un=t=>Bs(t,Ln),En=(t,n,c,r,a=0)=>q((c?ss:g)(t,n[a],a>Fs(n)-2?c:V),d=>{if(a>Fs(n)-2)return r?.(d)&&_(t,n[a]),d;let L=En(d,n,c,r,a+1);return y(d)&&_(t,n[a]),L}),wc=JSON.stringify,dn=JSON.parse,nt=t=>wc(t,(n,c)=>gc(c,Map)?Ws.fromEntries([...c]):c),Dc=(t,n)=>(t??0)<(n??0)?-1:1,Hc=/^\d+$/,Ze=()=>{let t=[],n=0;return[c=>(c?pc(t):null)??""+n++,c=>{uc(Hc,c)&&Fs(t)<1e3&&Kt(t,c)}]},St=t=>new Set(Je(t)||J(t)?t:[t]),pt=(t,n)=>t?.add(n),_c=(t,n=[""])=>{let c=[],r=(a,d)=>d==Fs(n)?Kt(c,a):n[d]===null?v(a,L=>r(L,d+1)):Ct([n[d],null],L=>r(g(a,L),d+1));return r(t,0),c},Fc=t=>{let n,[c,r]=Ze(),a=V();return[(p,E,f,u=[],R=()=>[])=>{n??=t();let M=c(1);return _(a,M,[p,E,f,u,R]),pt(En(E,f??[""],St),M),M},(p,E,...f)=>Ct(_c(p,E),u=>v(u,R=>g(a,R)[0](n,...E??[],...f))),p=>q(g(a,p),([,E,f])=>(En(E,f??[""],void 0,u=>($t(u,p),y(u)?1:0)),_(a,p),r(p),f)),p=>q(g(a,p),([E,,f=[],u,R])=>{let M=(...m)=>{let D=Fs(m);D==Fs(f)?E(n,...m,...R(m)):J(f[D])?Ct(u[D]?.(...m)??[],U=>M(...m,U)):M(...m,f[D])};M()})]},Bt=t=>[t,t],G=(t,n=Cn)=>n(t[0])+n(t[1]),Y=()=>[V(),V()],Ue=t=>[...t],Wt=([t,n])=>t===n,Tt=(t,n,c)=>_(t,n,g(t,n)==-c?void 0:c),yn=()=>{let t,n,c=!1,r=!1,a=0,d=[],L=V(),b=V(),$=V(),p=V(),E=V(),f=V(),u=V(),R=V(),M=V(),m=V(),D=V(),U=V(),Ts=V(),Ls=V(),Vs=St(),Cs=V(),Ms=V(),N=V(),Z=V(),ot=Y(),C=Y(),z=Y(),cs=Y(),O=Y(),S=Y(),P=Y(),Q=Y(),X=Y(),is=Y(),Es=Y(),gs=Y(),F=Y(),K=Y(),I=Y(),ps=Y(),Ss=Y(),vs=Y(),ys=Y(),Ns=Y(),xs=Y(),rs=Y(),k=V(),ls=Y(),[as,A,Os,fs]=Fc(()=>ts),yt=s=>js(s,e=>js(e,Vn)),Ie=s=>js(s,Vn),Vn=s=>{if(!js(s,(o,i)=>dc([Gt,Js],i)))return!1;let e=s[Gt];return!qe(e)&&e!=ke?!1:(ut(s[Js])!=e&&$e(s,Js),!0)},so=Je,to=s=>js(s,Mn,Ps),Mn=(s,e)=>(!t||os(D,e)||Ps(e))&&js(s,(o,i)=>Rt(e,i,o),()=>Ps(e)),Rt=(s,e,o,i)=>js(i?o:wn(o,s,e),(l,h)=>q(vn(s,e,h,l),T=>(o[h]=T,!0),()=>!1),()=>Ps(s,e)),vn=(s,e,o,i)=>t?q(g(g(D,s),o),l=>ut(i)!=l[Gt]?Ps(s,e,o,i,l[Js]):i,()=>Ps(s,e,o,i)):J(ut(i))?Ps(s,e,o,i):i,Nn=(s,e)=>js(e?s:no(s),(o,i)=>q(xn(i,o),l=>(s[i]=l,!0),()=>!1),()=>it()),xn=(s,e)=>n?q(g(Ts,s),o=>ut(e)!=o[Gt]?it(s,e,o[Js]):e,()=>it(s,e)):J(ut(e))?it(s,e):e,wn=(s,e,o)=>(q(g(U,e),([i,l])=>{v(i,(h,T)=>{Et(s,T)||(s[T]=h)}),v(l,h=>{Et(s,h)||Ps(e,o,h)})}),s),no=s=>(n&&(v(Ls,(e,o)=>{Et(s,o)||(s[o]=e)}),v(Vs,e=>{Et(s,e)||it(e)})),s),Dn=s=>$s(D,s,(e,o,i)=>{let l=V(),h=St();$s(ss(D,o,V),i,(T,x,w)=>{_(T,x,w),q(w[Js],ws=>_(l,x,ws),()=>pt(h,x))}),_(U,o,[l,h])},(e,o)=>{_(D,o),_(U,o)}),Hn=s=>$s(Ts,s,(e,o,i)=>{_(Ts,o,i),q(i[Js],l=>_(Ls,o,l),()=>pt(Vs,o))},(e,o)=>{_(Ts,o),_(Ls,o),$t(Vs,o)}),_n=s=>ms(s)?Pt():_t(s),eo=([s,e])=>{(ms(s)?Pt:_t)(s),(ms(e)?bt:Ft)(e)},Fn=s=>$s(N,s,(e,o,i)=>mt(o,i),(e,o)=>zn(o)),mt=(s,e)=>$s(ss(N,s,()=>(Bn(s,1),_(Cs,s,Ze()),_(Ms,s,V()),V())),e,(o,i,l)=>ct(s,o,i,l),(o,i)=>jn(s,o,i)),ct=(s,e,o,i,l)=>$s(ss(e,o,()=>(Wn(s,o,1),V())),i,(h,T,x)=>Qt(s,o,h,T,x),(h,T)=>Gn(s,e,o,h,T,l)),Qt=(s,e,o,i,l)=>{os(o,i)||Un(s,e,i,1);let h=g(o,i);l!==h&&(kn(s,e,i,h,l),_(o,i,l))},Pn=(s,e,o,i,l)=>q(g(e,o),h=>Qt(s,o,h,i,l),()=>ct(s,e,o,wn({[i]:l},s,o))),bn=s=>ms(s)?bt():Ft(s),An=s=>$s(Z,s,(e,o,i)=>Vt(o,i),(e,o)=>Yn(o)),Vt=(s,e)=>{os(Z,s)||qn(s,1);let o=g(Z,s);e!==o&&(Jn(s,o,e),_(Z,s,e))},oo=(s,e)=>{let[o]=g(Cs,s),i;do i=o(e);while(os(g(N,s),i));return i},Mt=s=>g(N,s)??mt(s,{}),zn=s=>mt(s,{}),jn=(s,e,o)=>{let[,i]=g(Cs,s);i(o),ct(s,e,o,{},!0)},Gn=(s,e,o,i,l,h)=>{let T=g(g(U,s)?.[0],l);if(!J(T)&&!h)return Qt(s,o,i,l,T);let x=w=>{kn(s,o,w,g(i,w)),Un(s,o,w,-1),_(i,w)};J(T)?x(l):Ys(i,x),y(i)&&(Wn(s,o,-1),y(_(e,o))&&(Bn(s,-1),_(N,s),_(Cs,s),_(Ms,s)))},Yn=s=>{let e=g(Ls,s);if(!J(e))return Vt(s,e);Jn(s,g(Z,s)),qn(s,-1),_(Z,s)},Bn=(s,e)=>Tt(L,s,e),Wn=(s,e,o)=>Tt(ss(p,s,V),e,o)&&_($,s,ss($,s,()=>0)+o),Un=(s,e,o,i)=>{let l=g(Ms,s),h=g(l,o)??0;(h==0&&i==1||h==1&&i==-1)&&Tt(ss(b,s,V),o,i),_(l,o,h!=-i?h+i:null),Tt(ss(ss(E,s,V),e,V),o,i)},kn=(s,e,o,i,l)=>{ss(ss(ss(f,s,V),e,V),o,()=>[i,0])[1]=l,d[3]?.(s,e,o,l)},qn=(s,e)=>Tt(u,s,e),Jn=(s,e,o)=>{ss(R,s,()=>[e,0])[1]=o,d[4]?.(s,o)},Ps=(s,e,o,i,l)=>(Kt(ss(ss(ss(M,s,V),e,V),o,()=>[]),i),l),it=(s,e,o)=>(Kt(ss(m,s,()=>[]),e),o),vt=(s,e,o)=>q(g(g(g(f,s),e),o),([i,l])=>[!0,i,l],()=>[!1,...Bt(xt(s,e,o))]),Kn=s=>q(g(R,s),([e,o])=>[!0,e,o],()=>[!1,...Bt(wt(s))]),$n=s=>!y(M)&&!y(ps[s])?v(s?un(M):M,(e,o)=>v(e,(i,l)=>v(i,(h,T)=>A(ps[s],[o,l,T],h)))):0,Zn=s=>!y(m)&&!y(Ss[s])?v(s?Bs(m):m,(e,o)=>A(Ss[s],[o],e)):0,rt=(s,e,o,i)=>{if(!y(s))return A(e,i,()=>hs(s)),Ys(s,(l,h)=>A(o,[...i??[],l],h==1)),1},On=s=>{let e=Dt();e!=c&&A(ot[s],void 0,e);let o=y(is[s]),i=y(F[s])&&y(K[s])&&y(X[s])&&y(Es[s])&&y(S[s])&&y(P[s])&&y(Q[s])&&o&&y(z[s])&&y(cs[s]),l=y(I[s])&&y(gs[s])&&y(O[s])&&y(C[s]);if(!i||!l){let h=s?[Bs(L),Ln(b),Bs($),Ln(p),un(E),un(f)]:[L,b,$,p,E,f];if(!i){rt(h[0],z[s],cs[s]),v(h[1],(x,w)=>rt(x,S[s],P[s],[w])),v(h[2],(x,w)=>{x!=0&&A(Q[s],[w],se(w))});let T=St();v(h[3],(x,w)=>{rt(x,X[s],Es[s],[w])&&!o&&(A(is[s],[w,null]),pt(T,w))}),o||v(h[5],(x,w)=>{if(!os(T,w)){let ws=St();v(x,bs=>v(bs,([At,zt],lt)=>zt!==At?pt(ws,lt):$t(bs,lt))),v(ws,bs=>A(is[s],[w,bs]))}}),v(h[4],(x,w)=>v(x,(ws,bs)=>rt(ws,F[s],K[s],[w,bs])))}if(!l){let T;v(h[5],(x,w)=>{let ws;v(x,(bs,At)=>{let zt;v(bs,([lt,de],_o)=>{de!==lt&&(A(I[s],[w,At,_o],de,lt,vt),T=ws=zt=1)}),zt&&A(gs[s],[w,At],vt)}),ws&&A(O[s],[w],vt)}),T&&A(C[s],void 0,vt)}}},Qn=s=>{let e=Ht();e!=r&&A(vs[s],void 0,e);let o=y(Ns[s])&&y(xs[s]),i=y(rs[s])&&y(ys[s]);if(!o||!i){let l=s?[Bs(u),Bs(R)]:[u,R];if(o||rt(l[0],Ns[s],xs[s]),!i){let h;v(l[1],([T,x],w)=>{x!==T&&(A(rs[s],[w],x,T,Kn),h=1)}),h&&A(ys[s],void 0,Kn)}}},j=(s,...e)=>(en(()=>s(...Jt(e,H))),ts),Xn=(s,e,o,i,l)=>{let h=Nt(s,e,...o);return as(()=>{let T=Nt(s,e,...o);Lc(T,h)||(h=T,i(ts,s,e,...o,h))},is[l?1:0],[s,e],[us])},co=()=>[Xt(),sn()],Xt=()=>Yt(N),us=()=>dt(N),io=s=>Tn(g(N,H(s))),In=s=>dt(g(Ms,H(s))),se=s=>pn(g(N,H(s))),Qs=s=>dt(g(N,H(s))),Nt=(s,e,o,i=0,l)=>Zt(s)?Nt(s.tableId,s.cellId,s.descending,s.offset,s.limit):Jt(Ge(Ec(xc(g(N,H(s)),(h,T)=>[J(e)?T:g(h,H(e)),T]),([h],[T])=>Dc(h,T)*(o?-1:1)),i,J(l)?l:i+l),([,h])=>h),ro=(s,e)=>hs(g(g(N,H(s)),H(e))),It=(s,e)=>dt(g(g(N,H(s)),H(e))),xt=(s,e,o)=>g(g(g(N,H(s)),H(e)),H(o)),sn=()=>hs(Z),tn=()=>dt(Z),wt=s=>g(Z,H(s)),Dt=()=>!y(N),te=s=>os(N,H(s)),ne=(s,e)=>os(g(Ms,H(s)),H(e)),ee=(s,e)=>os(g(N,H(s)),H(e)),oe=(s,e,o)=>os(g(g(N,H(s)),H(e)),H(o)),Ht=()=>!y(Z),ce=s=>os(Z,H(s)),lo=()=>nt(N),ao=()=>nt(Z),fo=()=>nt([N,Z]),ho=()=>nt(D),go=()=>nt(Ts),uo=()=>nt([D,Ts]),To=s=>j(()=>{let e=an(s)?s():s;so(e)&&eo(e)}),_t=s=>j(()=>to(s)?Fn(s):0),Lo=(s,e)=>j(o=>Mn(e,o)?mt(o,e):0,s),Eo=(s,e,o)=>j((i,l)=>Rt(i,l,o)?ct(i,Mt(i),l,o):0,s,e),So=(s,e,o=!0)=>en(()=>{let i;return Rt(s,i,e)&&(s=H(s),ct(s,Mt(s),i=oo(s,o?1:0),e)),i}),po=(s,e,o)=>j((i,l)=>{if(Rt(i,l,o,1)){let h=Mt(i);Gs(o,(T,x)=>Pn(i,h,l,x,T))}},s,e),Co=(s,e,o,i)=>j((l,h,T)=>q(vn(l,h,T,an(i)?i(xt(l,h,T)):i),x=>Pn(l,Mt(l),h,T,x)),s,e,o),Ft=s=>j(()=>Nn(s)?An(s):0),yo=s=>j(()=>Nn(s,1)?Gs(s,(e,o)=>Vt(o,e)):0),Ro=(s,e)=>j(o=>q(xn(o,an(e)?e(wt(o)):e),i=>Vt(o,i)),s),mo=s=>j(()=>{Gs(s[0],(e,o)=>J(e)?ae(o):Gs(e,(i,l)=>J(i)?fe(o,l):Gs(i,(h,T)=>Ye(ts,o,l,T,h)))),Gs(s[1],(e,o)=>Be(ts,o,e))}),ie=s=>(fn(()=>_n(dn(s))),ts),Vo=s=>(fn(()=>bn(dn(s))),ts),Mo=s=>j(()=>fn(()=>{let[e,o]=dn(s);_n(e),bn(o)},()=>ie(s))),re=s=>j(()=>{if((t=yt(s))&&(Dn(s),!y(N))){let e=Xt();Pt(),_t(e)}}),le=s=>j(()=>{if(n=Ie(s)){let e=sn();nn(),bt(),n=!0,Hn(s),Ft(e)}}),vo=(s,e)=>j(()=>{re(s),le(e)}),Pt=()=>j(()=>Fn({})),ae=s=>j(e=>os(N,e)?zn(e):0,s),fe=(s,e)=>j((o,i)=>q(g(N,o),l=>os(l,i)?jn(o,l,i):0),s,e),No=(s,e,o,i)=>j((l,h,T)=>q(g(N,l),x=>q(g(x,h),w=>os(w,T)?Gn(l,x,h,w,T,i):0)),s,e,o),bt=()=>j(()=>An({})),xo=s=>j(e=>os(Z,e)?Yn(e):0,s),he=()=>j(()=>{Dn({}),t=!1}),nn=()=>j(()=>{Hn({}),n=!1}),wo=()=>j(()=>{he(),nn()}),en=(s,e)=>{if(a!=-1){ge();let o=s();return ue(e),o}},ge=()=>(a!=-1&&a++,a==1&&(d[0]?.(),A(k)),ts),Do=()=>[hs(f,(s,e)=>g(L,e)===-1?void 0:hs(s,(o,i)=>g(g(p,e),i)===-1?void 0:hs(o,([,l])=>l,l=>Wt(l)),y,ms),y,ms),hs(R,([,s])=>s,s=>Wt(s)),1],Ho=()=>[!y(f),!y(R),Yt(f,Ue,Wt),Yt(M),hs(R,Ue,Wt),hs(m),hs(L),Tn(p),Yt(E),hs(u)],ue=s=>(a>0&&(a--,a==0&&(a=1,$n(1),y(f)||On(1),Zn(1),y(R)||Qn(1),s?.(ts)&&(v(f,(e,o)=>v(e,(i,l)=>v(i,([h],T)=>Ye(ts,o,l,T,h)))),gn(f),v(R,([e],o)=>Be(ts,o,e)),gn(R)),A(ls[0],void 0),a=-1,$n(0),y(f)||On(0),Zn(0),y(R)||Qn(0),d[1]?.(),A(ls[1],void 0),d[2]?.(),a=0,c=Dt(),r=Ht(),Ct([L,b,$,p,E,f,M,u,R,m],gn))),ts),ts={getContent:co,getTables:Xt,getTableIds:us,getTable:io,getTableCellIds:In,getRowCount:se,getRowIds:Qs,getSortedRowIds:Nt,getRow:ro,getCellIds:It,getCell:xt,getValues:sn,getValueIds:tn,getValue:wt,hasTables:Dt,hasTable:te,hasTableCell:ne,hasRow:ee,hasCell:oe,hasValues:Ht,hasValue:ce,getTablesJson:lo,getValuesJson:ao,getJson:fo,getTablesSchemaJson:ho,getValuesSchemaJson:go,getSchemaJson:uo,hasTablesSchema:()=>t,hasValuesSchema:()=>n,setContent:To,setTables:_t,setTable:Lo,setRow:Eo,addRow:So,setPartialRow:po,setCell:Co,setValues:Ft,setPartialValues:yo,setValue:Ro,applyChanges:mo,setTablesJson:ie,setValuesJson:Vo,setJson:Mo,setTablesSchema:re,setValuesSchema:le,setSchema:vo,delTables:Pt,delTable:ae,delRow:fe,delCell:No,delValues:bt,delValue:xo,delTablesSchema:he,delValuesSchema:nn,delSchema:wo,transaction:en,startTransaction:ge,getTransactionChanges:Do,getTransactionLog:Ho,finishTransaction:ue,forEachTable:s=>v(N,(e,o)=>s(o,i=>v(e,(l,h)=>i(h,T=>Ys(l,T))))),forEachTableCell:(s,e)=>Ys(g(Ms,H(s)),e),forEachRow:(s,e)=>v(g(N,H(s)),(o,i)=>e(i,l=>Ys(o,l))),forEachCell:(s,e,o)=>Ys(g(g(N,H(s)),H(e)),o),forEachValue:s=>Ys(Z,s),addSortedRowIdsListener:(s,e,o,i,l,h,T)=>Zt(s)?Xn(s.tableId,s.cellId,[s.descending??!1,s.offset??0,s.limit],e,o):Xn(s,e,[o,i,l],h,T),addStartTransactionListener:s=>as(s,k),addWillFinishTransactionListener:s=>as(s,ls[0]),addDidFinishTransactionListener:s=>as(s,ls[1]),callListener:s=>(fs(s),ts),delListener:s=>(Os(s),ts),getListenerStats:()=>({hasTables:G(ot),tables:G(C),tableIds:G(z),hasTable:G(cs),table:G(O),tableCellIds:G(S),hasTableCell:G(P,Lt),rowCount:G(Q),rowIds:G(X),sortedRowIds:G(is),hasRow:G(Es,Lt),row:G(gs,Lt),cellIds:G(F,Lt),hasCell:G(K,hn),cell:G(I,hn),invalidCell:G(ps,hn),hasValues:G(vs),values:G(ys),valueIds:G(Ns),hasValue:G(xs),value:G(rs),invalidValue:G(Ss),transaction:Cn(k)+G(ls)}),isMergeable:()=>!1,createStore:yn,addListener:as,callListeners:A,setInternalListeners:(s,e,o,i,l)=>d=[s,e,o,i,l]};return Gs({[Ks+Ae]:[0,ot,[],()=>[Dt()]],[Ae]:[0,C],[rc]:[0,z],[Ks+et]:[1,cs,[us],s=>[te(...s)]],[et]:[1,O,[us]],[et+ze]:[1,S,[us]],[Ks+et+Ut]:[2,P,[us,In],s=>[ne(...s)]],[lc]:[1,Q,[us]],[ac]:[1,X,[us]],[Ks+kt]:[2,Es,[us,Qs],s=>[ee(...s)]],[kt]:[2,gs,[us,Qs]],[ze]:[2,F,[us,Qs]],[Ks+Ut]:[3,K,[us,Qs,It],s=>[oe(...s)]],[Ut]:[3,I,[us,Qs,It],s=>Bt(xt(...s))],InvalidCell:[3,ps],[Ks+je]:[0,vs,[],()=>[Ht()]],[je]:[0,ys],[fc]:[0,Ns],[Ks+qt]:[1,xs,[tn],s=>[ce(...s)]],[qt]:[1,rs,[tn],s=>Bt(wt(s[0]))],InvalidValue:[1,Ss]},([s,e,o,i],l)=>{ts[ic+l+cc]=(...h)=>as(h[s],e[h[s+1]?1:0],s>0?Ge(h,0,s):void 0,o,i)}),mc(ts)};var Pc=["id","ids","add","api","del","get","set","use"],Xe=(t=!1)=>{addEventListener("load",()=>{let n=Ds("body > header > nav");if(n==null)return;let c=ns("div",null,{id:"search"}),r=ns("input",c,{type:"text",placeholder:(navigator.platform.startsWith("Mac")?"\u2318":"cmd-")+"K Search"}),a=ns("ol",c),d=ns("li",a,{},"No results found"),L=yn(),b=be(L);b.setIndexDefinition("p","p",f=>{let u=[];return f("t").split(" ").forEach(R=>{for(let M=0;M<R.length;M++)u.push(R.slice(0,M+1))}),u},"t",void 0,(f,u,R)=>mn(u,R)-mn(f,R)),fetch("/pages.json").then(f=>f.json()).then(f=>{L.transaction(()=>{L.setContent(f),L.forEachRow("p",u=>{let{n:R,s:M}=L.getRow("p",u),m=new Set;Rn(u,m,!0),Rn(R,m),Rn(M,m),L.setCell("p",u,"t",Array.from(m.values()).join(" "))})}),$()});let $=()=>{n.prepend(c);let f=()=>(r.value?Us:at)(a,"show");r.addEventListener("focus",f),r.addEventListener("input",()=>{f(),p()}),r.addEventListener("blur",()=>at(a,"show")),E()},p=()=>{let f=r.value.toLowerCase().split(/[^a-z0-9]+/),u=new Map;f.forEach(m=>b.getSliceRowIds("p",m).slice(0,50).forEach(D=>u.set(D,(u.get(D)??0)+mn(L.getCell("p",D,"t"),m))));let R=Array.from(u.keys()).sort((m,D)=>u.get(D)-u.get(m)).slice(0,10),M=R.length==0?[d]:R.map((m,D)=>{let U=ns("li"),{n:Ts,s:Ls}=L.getRow("p",m);return Oe(ns("b",U),Ts,f[0]),Oe(ns("span",U),Ls,f[0]),U.title=Ls,U.addEventListener("mousedown",()=>t?location.href=m:pe(m)),D==0&&Us(U,"hover"),U});a.replaceChildren(...M)},E=()=>addEventListener("keydown",f=>{if(Is.activeElement==r){let u=Xs(a,".hover");switch(f.code){case"Escape":return r.blur();case"ArrowDown":return jt(f),Qe(u,u?.nextSibling??a.firstChild);case"ArrowUp":return jt(f),Qe(u,u?.previousSibling??a.lastChild);case"Enter":return u?.dispatchEvent(new MouseEvent("mousedown"))}}else f.code=="KeyK"&&f.metaKey&&(r.focus(),jt(f))})})},Oe=(t,n,c)=>{let r=n.toLowerCase().indexOf(c);t.innerHTML=r==-1?n:n.substring(0,r)+"<em>"+n.substring(r,r+c.length)+"</em>"+n.substring(r+c.length)},Qe=(t,n)=>{t!=n&&(t&&at(t,"hover"),n&&(Us(n,"hover"),n.scrollIntoView({block:"nearest",inline:"nearest"})))},Rn=(t,n,c)=>{let r=t.replaceAll(/[^a-zA-Z0-9]/g," ").split(/\s+/);c&&r.reverse(),r.forEach(a=>{[a,...a.replaceAll(/([a-z])([A-Z])/g,"$1 $2").split(" ")].forEach(d=>{let L=d.toLowerCase();(L.length>3||Pc.includes(L))&&n.add(L)})})},mn=(t,n)=>{let c=t.length,r=t.indexOf(n);return r===-1?0:(c-r)/c};Le();ye();Xe(!0);})();
